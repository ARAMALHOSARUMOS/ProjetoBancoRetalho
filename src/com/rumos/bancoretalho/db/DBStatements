CREATE SCHEMA BANCORETALHOSCHEMA;

CREATE TABLE BANCORETALHOSCHEMA.BANCO (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   NOME VARCHAR(200),
   NIF INTEGER,
   VAL_JUROS FLOAT,
   PERIODO INTEGER
);

ALTER TABLE BANCORETALHOSCHEMA.BANCO ADD CONSTRAINT BANCO_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.AGENCIAS (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   ID_BANCO INTEGER,
   NOME VARCHAR(200),
   NIF INTEGER,
   ID_MORADA INTEGER
);

ALTER TABLE BANCORETALHOSCHEMA.AGENCIAS ADD CONSTRAINT AGENCIAS_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.MORADAS (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   RUA VARCHAR(200),
   LOCALIDADE VARCHAR(70),
   CODIPO_POSTAL VARCHAR(100),
   PAIS VARCHAR(50)
);

ALTER TABLE BANCORETALHOSCHEMA.MORADAS ADD CONSTRAINT MORADAS_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.TELEFONES (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   TIPOENTIDADE VARCHAR(20),
   ID_ENTIDADE INTEGER,
   NUMERO INTEGER
);

ALTER TABLE BANCORETALHOSCHEMA.TELEFONES ADD CONSTRAINT TELEFONES_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.CLIENTES (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   ID_AGENCIA INTEGER,
   NOME VARCHAR(200),
   CARTAO_CIDADAO INTEGER,
   PROFISSAO VARCHAR(100),
   ID_MORADA INTEGER,
   TIPO	VARCHAR(20)
);

ALTER TABLE BANCORETALHOSCHEMA.CLIENTES ADD CONSTRAINT CLIENTES_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.CONTAS (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   ID_CLIENTE INTEGER,
   TIPO VARCHAR(20),
   DATA_ABERTURA INTEGER	
);

ALTER TABLE BANCORETALHOSCHEMA.CONTAS ADD CONSTRAINT CONTAS_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.CARTOES (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   ID_CONTA INTEGER,
   TIPO VARCHAR(20),
   PLAFOND INTEGER,
   VALOR_PLAFOND INTEGER	
);

ALTER TABLE BANCORETALHOSCHEMA.CARTOES ADD CONSTRAINT CARTOES_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.MOVIMENTOS (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
   ID_CONTA INTEGER,
   ID_CARTAO INTEGER,
   TIPO VARCHAR(20),
   DATA INTEGER,
   HORA INTEGER,
   VALOR BIGINT	
);

ALTER TABLE BANCORETALHOSCHEMA.MOVIMENTOS ADD CONSTRAINT MOVIMENTOS_PRIMARY_KEY PRIMARY KEY (ID);

CREATE TABLE BANCORETALHOSCHEMA.EMAILS (
   ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,   
   ID_ENTIDADE INTEGER,
   TIPO VARCHAR(20),
   EMAIL VARCHAR(200)		
);

ALTER TABLE BANCORETALHOSCHEMA.EMAILS ADD CONSTRAINT EMAILS_PRIMARY_KEY PRIMARY KEY (ID);